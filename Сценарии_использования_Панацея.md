# 2.3 СЦЕНАРИИ ВАРИАНТОВ ИСПОЛЬЗОВАНИЯ

## 2.3.1 Авторизация.
Данный сценарий выполняется для аутентификации пользователя и выдачи ему прав в соответствии с его ролью, когда пользователь запускает приложение.
Основной поток событий:
1) пользователь запускает приложение;
2) система выводит форму авторизации;
3) пользователь заполняет поля формы своими учётными данными (email и пароль) и отправляет запрос на авторизацию;
4) система выводит стартовую страницу для роли, которую имеет пользователь.
Альтернативный поток событий:
1) пользователь запускает приложение;
2) система выводит форму авторизации;
3) пользователь не верно заполняет поля формы и отправляет запрос на авторизацию;
4) система выводит информацию с описанием ошибки и прерывает выполнение сценария.

## 2.3.2 Выход из учетной записи.
Предусловие: пользователь авторизован.
Данный сценарий выполняется, когда пользователь отправляет запрос на выход из своей учетной записи. Пользователь завершает работу с АИС.
Основной поток событий:
1) пользователь отправляет запрос на выход из своей учетной записи;
2) система выводит форму авторизации.

## 2.3.3 Регистрация нового пациента.
Данный сценарий выполняется, когда новый пользователь отправляет запрос на регистрацию в системе. Пользователь создаёт новый аккаунт пациента.
Основной поток событий:
1) пользователь отправляет запрос на регистрацию;
2) система выводит форму регистрации;
3) пользователь заполняет поля формы (email, имя, пароль, дата рождения, телефон) и отправляет запрос на создание аккаунта;
4) система добавляет новую запись в БД и создаёт аккаунт пациента.
Альтернативный поток событий:
1) пользователь отправляет запрос на регистрацию;
2) система выводит форму регистрации;
3) пользователь не верно заполняет поля формы (email уже используется) и отправляет запрос на создание аккаунта;
4) система выводит информацию с описанием ошибки и прерывает выполнение сценария.

## 2.3.4 Просмотр медицинских записей.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр медицинских записей. Пользователь просматривает свои медицинские записи.
Основной поток событий:
1) пользователь отправляет запрос на просмотр медицинских записей;
2) система выводит страницу со списком медицинских записей пациента.

## 2.3.5 Поиск врачей.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на поиск врачей. Пользователь ищет врачей по имени или специальности.
Основной поток событий:
1) пользователь отправляет запрос на поиск врачей;
2) система выводит страницу со списком врачей;
3) пользователь вводит критерии поиска (имя или специальность) и отправляет запрос на поиск;
4) система выводит отфильтрованный список врачей.

## 2.3.6 Запись на прием - выбор даты и врача.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на запись к врачу. Пользователь выбирает дату и врача для записи на приём.
Основной поток событий:
1) пользователь отправляет запрос на запись к врачу;
2) система выводит форму выбора даты и специальности;
3) пользователь выбирает дату и опционально специальность, затем отправляет запрос на просмотр доступных врачей;
4) система выводит список доступных врачей с временными слотами.
Альтернативный поток событий:
1) пользователь выбирает дату, на которую нет доступных врачей;
2) система выводит информацию об отсутствии доступных врачей и предлагает выбрать другую дату.

## 2.3.7 Подтверждение записи на прием.
Предусловие: пользователь авторизован и имеет роль «Пациент», выбраны врач и время приёма.
Данный сценарий выполняется, когда пользователь отправляет запрос на подтверждение записи. Пользователь подтверждает запись к выбранному врачу.
Основной поток событий:
1) пользователь выбирает временной слот и отправляет запрос на подтверждение записи;
2) система выводит форму подтверждения записи;
3) пользователь вводит причину обращения (необязательно) и отправляет запрос на создание записи;
4) система создаёт запись в БД и выводит подтверждение с номером записи.
Альтернативный поток событий:
1) пользователь выбирает уже занятое время;
2) система выводит информацию об ошибке и прерывает выполнение сценария.

## 2.3.8 Просмотр истории записей.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр своих записей. Пользователь просматривает все свои записи к врачам.
Основной поток событий:
1) пользователь отправляет запрос на просмотр записей;
2) система выводит страницу со списком всех записей пациента с возможностью фильтрации по дате.

## 2.3.9 Отмена записи на прием.
Предусловие: пользователь авторизован и имеет роль «Пациент», у пациента есть активная запись.
Данный сценарий выполняется, когда пользователь отправляет запрос на отмену записи. Пользователь отменяет запись на приём к врачу.
Основной поток событий:
1) пользователь выбирает запись в списке записей и отправляет запрос на отмену;
2) система запрашивает подтверждение отмены;
3) пользователь отправляет запрос с подтверждением отмены;
4) система изменяет статус записи на «отменена» в БД.

## 2.3.10 Редактирование профиля пациента.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на изменение своих данных. Пользователь редактирует информацию в своём профиле.
Основной поток событий:
1) пользователь отправляет запрос на редактирование профиля;
2) система выводит форму с текущими данными пациента;
3) пользователь вводит новые значения в поля профиля и отправляет запрос на сохранение изменений;
4) система обновляет данные пациента в БД.
Альтернативный поток событий:
1) пользователь вводит неверные значения (email уже используется) и отправляет запрос на сохранение;
2) система выводит информацию с описанием ошибки и прерывает выполнение сценария.

## 2.3.11 Деактивация аккаунта пациента.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на деактивацию аккаунта. Пользователь удаляет свой аккаунт из системы.
Основной поток событий:
1) пользователь отправляет запрос на деактивации аккаунта;
2) система запрашивает подтверждение деактивации;
3) пользователь отправляет запрос с подтверждением деактивации;
4) система деактивирует аккаунт пациента и все связанные записи из БД.

## 2.3.12 Просмотр записей на сегодня.
Предусловие: пользователь авторизован и имеет роль «Врач».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр записей на текущий день. Пользователь просматривает список пациентов, записанных на приём.
Основной поток событий:
1) пользователь отправляет запрос на просмотр записей на сегодня;
2) система выводит страницу со списком записей врача на текущий день.

## 2.3.13 Отметка прихода пациента.
Предусловие: пользователь авторизован и имеет роль «Врач», у врача есть запись пациента на сегодня.
Данный сценарий выполняется, когда пользователь отправляет запрос на отметку прихода пациента. Пользователь подтверждает явку пациента на приём.
Основной поток событий:
1) пользователь выбирает запись пациента и отправляет запрос на отметку прихода;
2) система обновляет статус записи на «подтверждён» в БД;
3) система выводит подтверждение изменения статуса.

## 2.3.14 Отметка неявки пациента.
Предусловие: пользователь авторизован и имеет роль «Врач», у врача есть запись пациента.
Данный сценарий выполняется, когда пользователь отправляет запрос на отметку неявки. Пользователь отмечает, что пациент не явился на приём.
Основной поток событий:
1) пользователь выбирает запись пациента и отправляет запрос на отметку неявки;
2) система запрашивает подтверждение;
3) пользователь отправляет запрос с подтверждением;
4) система изменяет статус записи на «не явился» в БД.

## 2.3.15 Создание медицинской записи.
Предусловие: пользователь авторизован и имеет роль «Врач», врач принимает пациента.
Данный сценарий выполняется, когда пользователь отправляет запрос на создание медицинской записи. Пользователь создаёт медицинскую запись для пациента.
Основной поток событий:
1) пользователь отправляет запрос на создание медицинской записи;
2) система выводит форму создания медицинской записи;
3) пользователь заполняет поля формы (жалобы, анамнез, результаты осмотра, диагнозы, назначения) и отправляет запрос на сохранение;
4) система добавляет новую запись в БД и обновляет статус приёма.
Альтернативный поток событий:
1) пользователь сохраняет запись как черновик для последующего редактирования;
2) система сохраняет запись со статусом «черновик».

## 2.3.16 Редактирование медицинской записи.
Предусловие: пользователь авторизован и имеет роль «Врач», медицинская запись создана данным врачом.
Данный сценарий выполняется, когда пользователь отправляет запрос на изменение медицинской записи. Пользователь редактирует существующую медицинскую запись.
Основной поток событий:
1) пользователь выбирает медицинскую запись и отправляет запрос на редактирование;
2) система выводит форму с существующими данными;
3) пользователь вводит новые значения в поля записи и отправляет запрос на сохранение изменений;
4) система обновляет данные в БД и логирует изменения.

## 2.3.17 Добавление результатов анализов.
Предусловие: пользователь авторизован и имеет роль «Врач», медицинская запись существует.
Данный сценарий выполняется, когда пользователь отправляет запрос на добавление результатов анализов. Пользователь добавляет результаты лабораторных исследований.
Основной поток событий:
1) пользователь отправляет запрос на добавление результатов анализов;
2) система выводит форму добавления результатов;
3) пользователь заполняет поля формы (название анализа, результаты, референсные значения) и отправляет запрос на сохранение;
4) система добавляет новую запись в БД.

## 2.3.18 Просмотр пациентов врача.
Предусловие: пользователь авторизован и имеет роль «Врач».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр своих пациентов. Пользователь просматривает список всех пациентов, которые к нему записывались.
Основной поток событий:
1) пользователь отправляет запрос на просмотр пациентов;
2) система выводит страницу со списком пациентов врача с возможностью поиска и фильтрации.

## 2.3.19 Управление расписанием врача.
Предусловие: пользователь авторизован и имеет роль «Врач».
Данный сценарий выполняется, когда пользователь отправляет запрос на управление расписанием. Пользователь управляет своим рабочим расписанием.
Основной поток событий:
1) пользователь отправляет запрос на управление расписанием;
2) система выводит текущее расписание врача;
3) пользователь создаёт новые слоты или изменяет существующие и отправляет запрос на сохранение;
4) система обновляет расписание в БД.

## 2.3.20 Экспорт медицинской записи в PDF.
Предусловие: пользователь авторизован и имеет роль «Врач», медицинская запись существует.
Данный сценарий выполняется, когда пользователь отправляет запрос на экспорт записи. Пользователь экспортирует медицинскую запись в формате PDF.
Основной поток событий:
1) пользователь выбирает медицинскую запись и отправляет запрос на экспорт в PDF;
2) система генерирует PDF-документ с медицинской информацией;
3) система предоставляет файл для загрузки;
4) система логирует действие в журнал аудита.

## 2.3.21 Настройки профиля врача.
Предусловие: пользователь авторизован и имеет роль «Врач».
Данный сценарий выполняется, когда пользователь отправляет запрос на изменение настроек. Пользователь редактирует свои контактные данные.
Основной поток событий:
1) пользователь отправляет запрос на изменение настроек;
2) система выводит форму с текущими данными врача;
3) пользователь вводит новые значения email, телефон или пароля и отправляет запрос на сохранение;
4) система обновляет данные в БД.

## 2.3.23 Просмотр панели управления администратора.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр главной страницы. Пользователь просматривает общую статистику системы.
Основной поток событий:
1) пользователь отправляет запрос на просмотр панели управления;
2) система выводит страницу с общей статистикой (количество врачей, пациентов, записей).

## 2.3.24 Добавление нового врача.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на создание аккаунта врача. Пользователь добавляет нового врача в систему.
Основной поток событий:
1) пользователь отправляет запрос на добавление врача;
2) система выводит форму добавления врача;
3) пользователь заполняет поля формы имя, email, телефон, пароль, специальности и отправляет запрос на создание;
4) система добавляет новую запись в БД.
Альтернативный поток событий:
1) пользователь вводит email, который уже используется;
2) система выводит информацию с описанием ошибки и прерывает выполнение сценария.

## 2.3.25 Редактирование данных врача.
Предусловие: пользователь авторизован и имеет роль «Администратор», врач существует в системе.
Данный сценарий выполняется, когда пользователь отправляет запрос на изменение данных врача. Пользователь редактирует информацию о враче.
Основной поток событий:
1) пользователь выбирает врача из списка и отправляет запрос на редактирование;
2) система выводит форму с текущими данными врача;
3) пользователь вводит новые значения в поля и отправляет запрос на сохранение изменений;
4) система обновляет данные врача в БД.

## 2.3.26 Удаление врача.
Предусловие: пользователь авторизован и имеет роль «Администратор», врач существует в системе.
Данный сценарий выполняется, когда пользователь отправляет запрос на удаление врача. Пользователь удаляет врача из системы.
Основной поток событий:
1) пользователь выбирает врача из списка и отправляет запрос на удаление;
2) система запрашивает подтверждение удаления;
3) пользователь отправляет запрос с подтверждением удаления;
4) система удаляет врача и связанные записи из БД.

## 2.3.27 Добавление нового пациента.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на создание аккаунта пациента. Пользователь добавляет нового пациента в систему.
Основной поток событий:
1) пользователь отправляет запрос на добавление пациента;
2) система выводит форму добавления пациента;
3) пользователь заполняет поля формы и отправляет запрос на создание;
4) система добавляет новую запись в БД.

## 2.3.28 Поиск и просмотр пациентов.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр пациентов. Пользователь просматривает и ищет пациентов в системе.
Основной поток событий:
1) пользователь отправляет запрос на просмотр списка пациентов;
2) система выводит страницу со списком всех пациентов;
3) пользователь вводит критерии поиска (имя, email, телефон) и отправляет запрос на поиск;
4) система выводит отфильтрованный список пациентов.

## 2.3.29 Управление расписанием врачей.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на управление расписанием. Пользователь управляет расписанием врачей клиники.
Основной поток событий:
1) пользователь отправляет запрос на управление расписанием;
2) система выводит список врачей;
3) пользователь выбирает врача и создаёт расписание (рабочие часы, перерывы, длительность приёмов);
4) система сохраняет расписание в БД.

## 2.3.30 Создание исключений в расписании.
Предусловие: пользователь авторизован и имеет роль «Администратор», у врача есть базовое расписание.
Данный сценарий выполняется, когда пользователь отправляет запрос на создание исключения. Пользователь добавляет исключение в расписание врача.
Основной поток событий:
1) пользователь выбирает врача и отправляет запрос на добавление исключения;
2) система выводит форму создания исключения;
3) пользователь указывает дату и причину (отпуск, больничный, конференция) и отправляет запрос на сохранение;
4) система сохраняет исключение и блокирует запись на указанную дату.

## 2.3.31 Просмотр всех записей на прием.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр записей. Пользователь просматривает все записи пациентов в системе.
Основной поток событий:
1) пользователь отправляет запрос на просмотр записей;
2) система выводит страницу со списком всех записей с возможностью фильтрации по дате и врачу.

## 2.3.32 Создание медицинских записей администратором.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на создание медицинской записи. Пользователь создаёт медицинскую запись от имени врача.
Основной поток событий:
1) пользователь отправляет запрос на создание медицинской записи;
2) система выводит форму создания записи;
3) пользователь выбирает пациента и врача, заполняет медицинскую информацию и отправляет запрос на сохранение;
4) система создаёт запись в БД и логирует действие администратора.

## 2.3.33 Просмотр журнала аудита.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на просмотр журнала аудита. Пользователь просматривает все действия в системе.
Основной поток событий:
1) пользователь отправляет запрос на просмотр журнала аудита;
2) система выводит страницу со списком всех действий пользователей с возможностью фильтрации.

## 2.3.34 Управление специальностями.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на управление специальностями. Пользователь управляет медицинскими специальностями в системе.
Основной поток событий:
1) пользователь отправляет запрос на управление специальностями;
2) система выводит список специальностей;
3) пользователь добавляет новые специальности или назначает их врачам;
4) система сохраняет изменения в БД.

## 2.3.35 Создание детального расписания врача.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на создание детального расписания. Пользователь создаёт индивидуальные слоты для врача.
Основной поток событий:
1) пользователь выбирает врача и отправляет запрос на управление расписанием;
2) система выводит календарную сетку на неделю;
3) пользователь создаёт индивидуальные слоты для каждого дня и отправляет запрос на сохранение;
4) система сохраняет расписание в БД.

## 2.3.36 Навигация по неделям в расписании.
Предусловие: пользователь авторизован и имеет роль «Администратор», просматривает расписание врача.
Данный сценарий выполняется, когда пользователь отправляет запрос на переключение недель. Пользователь переключается между неделями в расписании.
Основной поток событий:
1) пользователь отправляет запрос на переход к другой неделе;
2) система выводит расписание на выбранную неделю;
3) пользователь может планировать расписание на будущие недели;
4) система отображает информацию о количестве записей.

## 2.3.37 Управление уведомлениями о записях.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на управление уведомлениями. Пользователь настраивает систему уведомлений.
Основной поток событий:
1) пользователь отправляет запрос на управление уведомлениями;
2) система выводит настройки уведомлений;
3) пользователь настраивает типы уведомлений (email, SMS) и отправляет запрос на сохранение;
4) система сохраняет настройки и логирует отправленные уведомления.

## 2.3.38 Восстановление пароля.
Данный сценарий выполняется, когда пользователь отправляет запрос на восстановление пароля. Пользователь восстанавливает забытый пароль.
Основной поток событий:
1) пользователь отправляет запрос на восстановление пароля;
2) система выводит форму ввода email;
3) пользователь вводит email и отправляет запрос на восстановление;
4) система отправляет ссылку для сброса пароля на email;
5) пользователь переходит по ссылке и создаёт новый пароль;
6) система обновляет пароль в БД.

## 2.3.39 Поиск врачей по специальности.
Предусловие: пользователь авторизован и имеет роль «Пациент».
Данный сценарий выполняется, когда пользователь отправляет запрос на поиск врачей по специальности. Пользователь ищет врачей определённой специальности.
Основной поток событий:
1) пользователь отправляет запрос на поиск врачей;
2) система выводит форму поиска со списком специальностей;
3) пользователь выбирает специальность и отправляет запрос на поиск;
4) система выводит список врачей выбранной специальности.

## 2.3.40 Групповая отмена записей.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на массовую отмену записей. Пользователь отменяет несколько записей одновременно.
Основной поток событий:
1) пользователь выбирает несколько записей и отправляет запрос на групповую отмену;
2) система запрашивает причину отмены;
3) пользователь вводит причину и отправляет запрос на подтверждение;
4) система отменяет выбранные записи и отправляет уведомления пациентам.

## 2.3.41 Экспорт данных для отчетности.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на экспорт данных. Пользователь экспортирует данные для отчётности.
Основной поток событий:
1) пользователь отправляет запрос на экспорт данных;
2) система выводит форму выбора периода и типа данных;
3) пользователь выбирает параметры (записи, пациенты, доходы) и отправляет запрос на генерацию отчёта;
4) система генерирует отчёт в формате Excel или PDF;
5) система предоставляет файл для загрузки.

## 2.3.44 Система напоминаний.
Предусловие: в системе настроены автоматические напоминания.
Данный сценарий выполняется автоматически системой. Система отправляет напоминания пациентам о предстоящих приёмах.
Основной поток событий:
1) система автоматически проверяет записи за 24 часа до приёма;
2) система формирует список пациентов для напоминаний;
3) система отправляет SMS или email напоминания согласно настройкам пациентов;
4) система логирует статистику отправленных напоминаний.

## 2.3.45 Резервное копирование и восстановление.
Предусловие: пользователь авторизован и имеет роль «Администратор».
Данный сценарий выполняется, когда пользователь отправляет запрос на резервное копирование. Пользователь создаёт резервную копию данных системы.
Основной поток событий:
1) пользователь отправляет запрос на создание резервной копии;
2) система создаёт резервную копию базы данных;
3) система сохраняет копию в защищённом хранилище;
4) система логирует операцию резервного копирования.
Альтернативный поток событий:
1) в случае сбоя системы администратор отправляет запрос на восстановление;
2) система восстанавливает данные из последней резервной копии.